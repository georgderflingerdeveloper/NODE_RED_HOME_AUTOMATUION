[{"id":"89f4663.1fb9198","type":"tab","label":"WERKSTÄTTE2","disabled":false,"info":""},{"id":"224ea99f.aa7d56","type":"tab","label":"IOCONTROL_PHIDGETS","disabled":false,"info":""},{"id":"bea2f80b.91edc8","type":"tab","label":"IOCONTROL_PHIDGET_CONFIG","disabled":false,"info":""},{"id":"362d879c.e4bd98","type":"ui_tab","z":"","name":"HAUS","icon":"dashboard","disabled":false,"hidden":false},{"id":"10da58d4.20f697","type":"ui_group","z":"","name":"HAUS","tab":"362d879c.e4bd98","disp":true,"width":"6","collapse":false},{"id":"d07e3bc1.1627f8","type":"ui_base","theme":{"name":"theme-dark","lightTheme":{"default":"#0094CE","baseColor":"#0094CE","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"darkTheme":{"default":"#097479","baseColor":"#097479","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"customTheme":{"name":"Untitled Theme 1","default":"#4B7930","baseColor":"#4B7930","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"},"themeState":{"base-color":{"default":"#097479","value":"#097479","edited":false},"page-titlebar-backgroundColor":{"value":"#097479","edited":false},"page-backgroundColor":{"value":"#111111","edited":false},"page-sidebar-backgroundColor":{"value":"#000000","edited":false},"group-textColor":{"value":"#0eb8c0","edited":false},"group-borderColor":{"value":"#555555","edited":false},"group-backgroundColor":{"value":"#333333","edited":false},"widget-textColor":{"value":"#eeeeee","edited":false},"widget-backgroundColor":{"value":"#097479","edited":false},"widget-borderColor":{"value":"#333333","edited":false},"base-font":{"value":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"}},"angularTheme":{"primary":"indigo","accents":"blue","warn":"red","background":"grey"}},"site":{"name":"Node-RED Dashboard","hideToolbar":"false","allowSwipe":"false","lockMenu":"false","allowTempTheme":"true","dateFormat":"DD/MM/YYYY","sizes":{"sx":48,"sy":48,"gx":6,"gy":6,"cx":6,"cy":6,"px":0,"py":0}}},{"id":"3a834059.84a91","type":"ui_tab","z":"","name":"WERKSTÄTTENRAUM2","icon":"dashboard","disabled":false,"hidden":false},{"id":"c7d1a1d5.a6e0f","type":"ui_group","z":"","name":"HEIZUNGSTEUERUNG","tab":"3a834059.84a91","disp":true,"width":"6","collapse":false},{"id":"616ab88e.5f5868","type":"ui_group","z":"","name":"The Switch","tab":"381cbc02.b45c54","disp":true,"width":"6","collapse":false},{"id":"381cbc02.b45c54","type":"ui_tab","z":"","name":"My Switch","icon":"dashboard","order":1},{"id":"198bfa2c.a0f586","type":"ui_switch","z":"89f4663.1fb9198","name":"Heizung","label":"Heizstrahler","tooltip":"","group":"c7d1a1d5.a6e0f","order":0,"width":"6","height":"2","passthru":false,"decouple":"true","topic":"Heizung","style":"","onvalue":"true","onvalueType":"bool","onicon":"fa-3x fa-thermometer-full","oncolor":"yellow","offvalue":"false","offvalueType":"bool","officon":"fa-3x fa-thermometer-empty","offcolor":"white","x":1540,"y":780,"wires":[[]]},{"id":"fb3b6f38.ec426","type":"ui_button","z":"89f4663.1fb9198","name":"","group":"c7d1a1d5.a6e0f","order":1,"width":0,"height":0,"passthru":false,"label":"EIN","tooltip":"","color":"","bgcolor":"","icon":"","payload":"true","payloadType":"bool","topic":"","x":230,"y":700,"wires":[["8b3804de.7aba68"]]},{"id":"dd48777c.f447c8","type":"ui_button","z":"89f4663.1fb9198","name":"","group":"c7d1a1d5.a6e0f","order":1,"width":0,"height":0,"passthru":false,"label":"AUS","tooltip":"","color":"","bgcolor":"","icon":"","payload":"false","payloadType":"bool","topic":"","x":230,"y":800,"wires":[["66ea1a52.dcf674","4be2d5b6.7890fc"]]},{"id":"66ea1a52.dcf674","type":"bigtimer","z":"89f4663.1fb9198","outtopic":"","outpayload1":"","outpayload2":"","name":"Big Timer","comment":"","lat":"48.22908","lon":"13.0208","starttime":"0","endtime":"0","starttime2":0,"endtime2":0,"startoff":0,"endoff":0,"startoff2":0,"endoff2":0,"offs":0,"outtext1":"on","outtext2":"off","timeout":1440,"sun":true,"mon":true,"tue":true,"wed":true,"thu":true,"fri":true,"sat":true,"jan":true,"feb":true,"mar":true,"apr":true,"may":true,"jun":true,"jul":true,"aug":true,"sep":true,"oct":true,"nov":true,"dec":true,"day1":0,"month1":0,"day2":0,"month2":0,"day3":0,"month3":0,"day4":0,"month4":0,"day5":0,"month5":0,"day6":0,"month6":0,"d1":0,"w1":0,"d2":0,"w2":0,"d3":0,"w3":0,"d4":0,"w4":0,"d5":0,"w5":0,"d6":0,"w6":0,"xday1":0,"xmonth1":0,"xday2":0,"xmonth2":0,"xday3":0,"xmonth3":0,"xday4":0,"xmonth4":0,"xday5":0,"xmonth5":0,"xday6":0,"xmonth6":0,"xd1":0,"xw1":0,"xd2":0,"xw2":0,"xd3":0,"xw3":0,"xd4":0,"xw4":0,"xd5":0,"xw5":0,"xd6":0,"xw6":0,"suspend":false,"random":false,"repeat":true,"atstart":true,"odd":false,"even":false,"x":1120,"y":840,"wires":[[],["243cc279.c9c30e","701ef43f.64de2c","afeebeb.222fb4","47e9c0cf.f322d"],[]]},{"id":"2d3b1ef7.fcc242","type":"ui_button","z":"89f4663.1fb9198","name":"","group":"c7d1a1d5.a6e0f","order":1,"width":0,"height":0,"passthru":true,"label":"AUTO","tooltip":"","color":"","bgcolor":"","icon":"","payload":"auto","payloadType":"str","topic":"","x":230,"y":880,"wires":[["66ea1a52.dcf674","22bc269f.e38e6a"]]},{"id":"8b3804de.7aba68","type":"change","z":"89f4663.1fb9198","name":"OnOverride","rules":[{"t":"change","p":"payload","pt":"msg","from":"true","fromt":"bool","to":"on","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":370,"y":700,"wires":[["66ea1a52.dcf674","f1dd33c6.f924b"]]},{"id":"4be2d5b6.7890fc","type":"change","z":"89f4663.1fb9198","name":"OffOverride","rules":[{"t":"change","p":"payload","pt":"msg","from":"false","fromt":"bool","to":"off","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":370,"y":760,"wires":[["66ea1a52.dcf674","f1dd33c6.f924b"]]},{"id":"22bc269f.e38e6a","type":"change","z":"89f4663.1fb9198","name":"Auto","rules":[{"t":"change","p":"payload","pt":"msg","from":"true","fromt":"bool","to":"auto","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":350,"y":840,"wires":[["66ea1a52.dcf674","f1dd33c6.f924b"]]},{"id":"f1dd33c6.f924b","type":"ui_text","z":"89f4663.1fb9198","group":"c7d1a1d5.a6e0f","order":4,"width":0,"height":0,"name":"","label":"Befehl","format":"{{msg.payload}}","layout":"row-spread","x":570,"y":820,"wires":[]},{"id":"243cc279.c9c30e","type":"change","z":"89f4663.1fb9198","name":"ConvertOn","rules":[{"t":"change","p":"payload","pt":"msg","from":"1","fromt":"num","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1310,"y":780,"wires":[["198bfa2c.a0f586","f5d9c65d.fc8e88"]]},{"id":"701ef43f.64de2c","type":"change","z":"89f4663.1fb9198","name":"ConvertOff","rules":[{"t":"change","p":"payload","pt":"msg","from":"0","fromt":"num","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1310,"y":820,"wires":[["198bfa2c.a0f586","f5d9c65d.fc8e88"]]},{"id":"837ceddd.dd08a","type":"ui_numeric","z":"89f4663.1fb9198","name":"OnHour","label":"Einschalten Stunde","tooltip":"","group":"c7d1a1d5.a6e0f","order":5,"width":0,"height":0,"passthru":false,"topic":"HourOn","format":"{{value}}","min":0,"max":"24","step":1,"x":1040,"y":140,"wires":[["97749b58.708e98"]]},{"id":"b2bfb5a0.efb2a8","type":"ui_numeric","z":"89f4663.1fb9198","name":"OnMinute","label":"Einschalten Minute","tooltip":"","group":"c7d1a1d5.a6e0f","order":5,"width":0,"height":0,"passthru":false,"topic":"MinuteOn","format":"{{value}}","min":0,"max":"59","step":1,"x":1040,"y":200,"wires":[["97749b58.708e98"]]},{"id":"6f52c086.45d28","type":"ui_numeric","z":"89f4663.1fb9198","name":"OffHour","label":"Ausschalten Stunde","tooltip":"","group":"c7d1a1d5.a6e0f","order":5,"width":0,"height":0,"passthru":false,"topic":"HourOff","format":"{{value}}","min":0,"max":"24","step":1,"x":1040,"y":260,"wires":[["97749b58.708e98"]]},{"id":"329d8dec.4441a2","type":"ui_numeric","z":"89f4663.1fb9198","name":"OffMinute","label":"Ausschalten Minute","tooltip":"","group":"c7d1a1d5.a6e0f","order":5,"width":0,"height":0,"passthru":false,"topic":"MinuteOff","format":"{{value}}","min":0,"max":"59","step":1,"x":1040,"y":320,"wires":[["97749b58.708e98"]]},{"id":"f898989b.6fb488","type":"file","z":"89f4663.1fb9198","name":"StoreTimeSettings","filename":"timesettings","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"none","x":1530,"y":200,"wires":[[]]},{"id":"174a2e39.7eacf2","type":"file in","z":"89f4663.1fb9198","name":"LoadTimeSettings","filename":"timesettings","format":"utf8","chunk":false,"sendError":false,"encoding":"none","x":350,"y":160,"wires":[["b390c4a5.b763d8"]]},{"id":"825c9871.dfd2f8","type":"inject","z":"89f4663.1fb9198","name":"","topic":"LOAD","payload":"true","payloadType":"bool","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":90,"y":460,"wires":[["174a2e39.7eacf2","2d3b1ef7.fcc242"]]},{"id":"b390c4a5.b763d8","type":"json","z":"89f4663.1fb9198","name":"","property":"payload","action":"","pretty":false,"x":550,"y":160,"wires":[["1a0bfb43.49d945","7b27dacf.9ca8b4","f94843f0.4d27d","da0fafa0.3f9db","4a69a19b.0b5b9","95cd355c.15657","98ae152e.4d2f38"]]},{"id":"1a0bfb43.49d945","type":"change","z":"89f4663.1fb9198","name":"GetHourOnAsValue","rules":[{"t":"move","p":"payload.HourOn","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":830,"y":140,"wires":[["837ceddd.dd08a"]]},{"id":"7b27dacf.9ca8b4","type":"change","z":"89f4663.1fb9198","name":"GetMinuteOnAsValue","rules":[{"t":"move","p":"payload.MinuteOn","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":840,"y":200,"wires":[["b2bfb5a0.efb2a8"]]},{"id":"f94843f0.4d27d","type":"change","z":"89f4663.1fb9198","name":"GetHourOffAsValue","rules":[{"t":"move","p":"payload.HourOff","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":840,"y":260,"wires":[["6f52c086.45d28"]]},{"id":"da0fafa0.3f9db","type":"change","z":"89f4663.1fb9198","name":"GetMinuteOffAsValue","rules":[{"t":"move","p":"payload.MinuteOff","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":840,"y":320,"wires":[["329d8dec.4441a2"]]},{"id":"4a69a19b.0b5b9","type":"function","z":"89f4663.1fb9198","name":"ProvideOverrideOffTime","func":"var OffOverride = \"Off_Override \";\nmsg.payload = OffOverride + msg.payload.HourOff + \":\" + msg.payload.MinuteOff;\nreturn msg;","outputs":1,"noerr":0,"x":850,"y":520,"wires":[["66ea1a52.dcf674"]]},{"id":"95cd355c.15657","type":"function","z":"89f4663.1fb9198","name":"ProvideOverrideOnTime","func":"var OnOverride = \"On_Override \";\nmsg.payload = OnOverride + msg.payload.HourOn + \":\" + msg.payload.MinuteOn;\nreturn msg;","outputs":1,"noerr":0,"x":850,"y":620,"wires":[["66ea1a52.dcf674"]]},{"id":"62760622.be76b","type":"inject","z":"89f4663.1fb9198","name":"Reload","topic":"","payload":"true","payloadType":"bool","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":160,"wires":[["174a2e39.7eacf2"]]},{"id":"a0f7fd94.9cb4e","type":"inject","z":"89f4663.1fb9198","name":"","topic":"RELAY","payload":"ON","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1320,"y":960,"wires":[["f5d9c65d.fc8e88"]]},{"id":"f5d9c65d.fc8e88","type":"function","z":"89f4663.1fb9198","name":"IO_CONTROL_HEATER_1","func":"var DigitalOutput0 = global.get('PublicDigitalOutput0');\nvar IsInitialized = global.get(\"PublicVintHubInit\");\n\nif( IsInitialized )\n{\n    if( msg.payload === 'ON')\n    {\n        DigitalOutput0.setDutyCycle(1);\n    }\n\n    if( msg.payload === 'OFF')\n    {\n        DigitalOutput0.setDutyCycle(0);\n    }\n}\n    \nreturn msg;","outputs":1,"noerr":0,"x":1640,"y":960,"wires":[[]]},{"id":"d94f9318.e9b56","type":"inject","z":"89f4663.1fb9198","name":"","topic":"RELAY","payload":"OFF","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1330,"y":1000,"wires":[["f5d9c65d.fc8e88"]]},{"id":"afeebeb.222fb4","type":"change","z":"89f4663.1fb9198","name":"StringCommandOn","rules":[{"t":"change","p":"payload","pt":"msg","from":"1","fromt":"num","to":"ON","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1330,"y":860,"wires":[["f5d9c65d.fc8e88"]]},{"id":"47e9c0cf.f322d","type":"change","z":"89f4663.1fb9198","name":"StringCommandOff","rules":[{"t":"change","p":"payload","pt":"msg","from":"0","fromt":"num","to":"OFF","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1330,"y":900,"wires":[["f5d9c65d.fc8e88"]]},{"id":"d0159537.6a36f8","type":"file in","z":"89f4663.1fb9198","name":"LoadBackupTimeSettings","filename":"backuptimesettings","format":"utf8","chunk":false,"sendError":false,"encoding":"none","x":370,"y":40,"wires":[["b390c4a5.b763d8"]]},{"id":"b415ad60.88d5e","type":"inject","z":"89f4663.1fb9198","name":"RestoreBackup","topic":"","payload":"true","payloadType":"bool","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":160,"y":40,"wires":[["d0159537.6a36f8"]]},{"id":"d19a9f19.61cc3","type":"inject","z":"224ea99f.aa7d56","name":"","topic":"INIT","payload":"true","payloadType":"bool","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":100,"y":60,"wires":[["afd4f6a6.0c7fd8"]]},{"id":"afd4f6a6.0c7fd8","type":"function","z":"224ea99f.aa7d56","name":"INIT_PHIDGETS_DIGITAL_OUTPUTS","func":"var NewMsg = { payload : ''};\nvar phidget22 = global.get('phidget22')\nvar conn = new phidget22.Connection(5661,'192.168.1.100');\nvar Initialized=context.get('init') || 0;\nvar digitalOutput0 = new phidget22.DigitalOutput();\n\ndigitalOutput0.onAttach = function onDigitalOutput0_Error() {\n        global.set(\"PublicVintHubInit\", 1);\n\t\tconsole.log('Vinthub attached!')\n\t};\n\ndigitalOutput0.onDetach = function onDigitalOutput0_Error() {\n\t    global.set(\"PublicVintHubInit\", 0);\n\t\tconsole.log('Vinthub detached!')\n\t};\n\n\nfunction Start()\n{\n    digitalOutput0.setIsHubPortDevice(true);\n    digitalOutput0.setHubPort(0);\n    digitalOutput0.setDeviceSerialNumber(726538);\n    digitalOutput0.open(5000).then(function () \n    {\n       global.set(\"PublicDigitalOutput0\", digitalOutput0);\n    });\n}\nconn.connect().then(Start).catch(function(err) {\n\tconsole.error(\"Error during connect:\", err);\n});\n\nglobal.set(\"PublicPhidget\", conn);\n\nreturn NewMsg;","outputs":1,"noerr":0,"x":360,"y":60,"wires":[[]]},{"id":"c1fd41c.0cbabc","type":"file","z":"bea2f80b.91edc8","name":"PHIDGETSETTINGS","filename":"phidgetsettings","appendNewline":true,"createDir":true,"overwriteFile":"true","encoding":"none","x":570,"y":100,"wires":[[]]},{"id":"b9359544.0e58d8","type":"inject","z":"bea2f80b.91edc8","name":"MAKE_TEMPLATE","topic":"CONFIG_TEMPLATE","payload":"{\"VINTHUB_WORKSHOP_HALL_2\":{\"ipadress\":\"192.168.1.100\",\"port\":5661,\"serialnumber\":726538}}","payloadType":"json","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":230,"y":100,"wires":[["c1fd41c.0cbabc","79ff7c5c.20bdec"]]},{"id":"79ff7c5c.20bdec","type":"debug","z":"bea2f80b.91edc8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":600,"y":180,"wires":[]},{"id":"f21b8c77.9b88a8","type":"function","z":"224ea99f.aa7d56","name":"INIT_PHIDGETS_PROTOTYPE","func":"var NewMsg = { payload : ''};\nvar phidget22 = global.get('phidget22')\n\nvar Config =\n{ \n    VintHub : \n    { \n        \"ipadress\":\"192.168.1.100\",\n        \"port\":5661, \n        \"serialnumber\":726538, \n        \"hubport\":0, \n        \"timeout\":5000,\n        \"PublicId\": \"PublicDigitalOutput0\"\n    }\n};\n\nvar conn = new phidget22.Connection(5661,'192.168.1.100');\nvar SerialNumber = 0;\nvar TimeOut = 0;\nvar HubPort = 0;\n\nvar digitalOutput0 = new phidget22.DigitalOutput();\n\ndigitalOutput0.onAttach = function onDigitalOutput0_Error() {\n        global.set(\"PublicVintHubInit\", 1);\n\t\tconsole.log('Vinthub attached!')\n\t};\n\ndigitalOutput0.onDetach = function onDigitalOutput0_Error() {\n\t    global.set(\"PublicVintHubInit\", 0);\n\t\tconsole.log('Vinthub detached!')\n\t};\n\t\n\nfunction StartInstance( Config, phidgetobject )\n{\n    phidgetobject.setIsHubPortDevice(true);\n    phidgetobject.setHubPort(Config.VintHub.hubport);\n    phidgetobject.setDeviceSerialNumber(Config.VintHub.serialnumber);\n    phidgetobject.open(timeout).then(function () \n    {\n       global.set(Config.VintHub.publicid, phidgetobject);\n    });   \n}\n\n\nconn.connect().then(StartInstance(Config, digitalOutput0)).catch(function(err) {\n\tconsole.error(\"Error during connect:\", err);\n});\n\nglobal.set(\"PublicPhidget\", conn);\n\nreturn NewMsg;","outputs":1,"noerr":0,"x":830,"y":60,"wires":[[]]},{"id":"97749b58.708e98","type":"function","z":"89f4663.1fb9198","name":"PrepareTimeData","func":"var NewMsg = {};\n\n \nvar DefaultSettings =   { \n       payload: \n             {\n               HourOn    : 4,\n               MinuteOn  : 0, \n               HourOff   : 12, \n               MinuteOff : 0\n             } \n       \n   };\n\nvar TimeSettings=flow.get('TimeSettingsMemory') || DefaultSettings;\n\n\nswitch( msg.topic)\n{\n    case \"HourOn\":\n         TimeSettings.payload.HourOn = msg.payload;\n         break;\n\n    case \"MinuteOn\":\n         TimeSettings.payload.MinuteOn = msg.payload;\n         break;\n         \n    case \"HourOff\":\n         TimeSettings.payload.HourOff = msg.payload;\n         break;\n\n    case \"MinuteOff\":\n         TimeSettings.payload.MinuteOff = msg.payload;\n         break;     \n         \n}\n\nflow.set('TimeSettingsMemory',TimeSettings);\n\nNewMsg = TimeSettings;\nreturn NewMsg;","outputs":1,"noerr":0,"x":1290,"y":200,"wires":[["f898989b.6fb488","4a69a19b.0b5b9","95cd355c.15657"]]},{"id":"98ae152e.4d2f38","type":"function","z":"89f4663.1fb9198","name":"StoreLoadedDataIntoContext","func":"var DefaultSettings =   { \n       payload: \n             {\n               HourOn    : 4,\n               MinuteOn  : 0, \n               HourOff   : 12, \n               MinuteOff : 0\n             } \n       \n   };\n\nflow.set('TimeSettingsMemory',msg) || DefaultSettings;\n\nvar LoadedSettings = flow.get('TimeSettingsMemory') || DefaultSettings;\nmsg = LoadedSettings;\nreturn msg;","outputs":1,"noerr":0,"x":870,"y":80,"wires":[[]]},{"id":"f94752da.8ffeb","type":"catch","z":"224ea99f.aa7d56","name":"","scope":null,"uncaught":false,"x":100,"y":300,"wires":[["331cbfde.a5f648"]]},{"id":"91e1424a.34f61","type":"ui_template","z":"89f4663.1fb9198","group":"10da58d4.20f697","name":"Clock Toolbar","order":9,"width":"0","height":"0","format":"<script id=\"titleScript\" type=\"text/javascript\">\n\n$(function() {\n    if($('.md-toolbar-tools').length != 0){\n        loadClock();\n    }else setTimeout(loadClock, 500)\n});\n\nfunction loadClock(){\n    $('#clock').remove();\n    var toolbar = $('.md-toolbar-tools');\n    \n    var div = $('<div/>');\n    var p = $('<p/ id=\"clock\">');\n    \n    div.append(p);\n    div[0].style.margin = '5px 5px 5px auto';\n    toolbar.append(div);\n\n    function displayTitle(lh) {\n        p.text(lh); \n    }\n    \n    function upTime() {\n        var d = new Date();\n        p.text(d.toLocaleString());\n    }\n\n    if(document.clockInterval){ \n            clearInterval(document.clockInterval);\n            document.clockInterval = null;\n    }\n        \n    document.clockInterval = setInterval(upTime,1000);\n}\n\n</script>","storeOutMessages":false,"fwdInMessages":false,"templateScope":"global","x":820,"y":40,"wires":[[]]},{"id":"331cbfde.a5f648","type":"ui_toast","z":"224ea99f.aa7d56","position":"top right","displayTime":"3","highlight":"","outputs":0,"ok":"OK","cancel":"","topic":"","name":"","x":320,"y":300,"wires":[]},{"id":"5ea27fa.c06178","type":"inject","z":"224ea99f.aa7d56","name":"","topic":"INIT","payload":"true","payloadType":"bool","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":120,"y":220,"wires":[["2ad65570.ee8d92"]]},{"id":"2ad65570.ee8d92","type":"function","z":"224ea99f.aa7d56","name":"INIT_DIGITAL_INPUTS","func":"var NewMsg = { topic : \"DigitalInput0\", state : false };\nvar phidget22 = global.get('phidget22')\n\nconsole.log('Opening Digital Input Module 0 ....')\n\nfunction RunDigitalInputHandler() {\n\tvar digitalInput0 = new phidget22.DigitalInput();\n\n\tdigitalInput0.setDeviceSerialNumber(597039);\n\n\tdigitalInput0.onStateChange = function onDigitalInput0_StateChange(state) {\n\t\tconsole.log('State DigitalInput1: ' + state.toString())\n\t\tNewMsg.state = state;\n\t\tnode.send(NewMsg);\n\t\tnode.done();\n\t};\n\n\tdigitalInput0.open(5000).then(function() {\n          console.log('DigitalInput0 open was sucessfull');\n          flow.set( \"DigitalInput0\", digitalInput0 );\n\t}).catch(function (err){\n\t\tconsole.error('Error during open:', err);\n\n\t})\n}\n\nvar conn = new phidget22.Connection(5661, '192.168.1.51');\nconn.connect().then(RunDigitalInputHandler).catch(function (err) {\n\tconsole.error('Error during connect:', err);\n\n});\n\n\nreturn;\n","outputs":1,"noerr":0,"x":350,"y":220,"wires":[["2aba4bba.3fa45c"]]},{"id":"2aba4bba.3fa45c","type":"debug","z":"224ea99f.aa7d56","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":610,"y":220,"wires":[]}]